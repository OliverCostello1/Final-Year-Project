<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Bid Processing</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAZx5pfgzczeuHWJSZVmes98jgOSmZCcVQ",
            authDomain: "fyp-bidder.firebaseapp.com",
            databaseURL: "https://fyp-bidder-default-rtdb.firebaseio.com",
            projectId: "fyp-bidder",
            storageBucket: "fyp-bidder.firebasestorage.app",
            messagingSenderId: "801916913350",
            appId: "1:801916913350:web:87294a67b770059efa39c7",
            measurementId: "G-BJL419PKWN"
        };

        const app = initializeApp(firebaseConfig);
    </script>

    <script>
        function scheduleBidProcessing() {
            console.log("Button Pressed");

            const frequency = document.getElementById("frequency").value;
            const dayOfWeek = document.getElementById("dayOfWeek").value;

            // Log the types and values of frequency and dayOfWeek
            console.log("Type of frequency:", typeof frequency, "Value:", frequency);
            console.log("Type of dayOfWeek:", typeof dayOfWeek, "Value:", dayOfWeek);

            if (frequency && dayOfWeek) {
                // Log values before sending
                console.log("Sending data to Firebase:", { frequency, dayOfWeek });

                // Send POST request to Firebase Function
                fetch('https://us-central1-fyp-bidder.cloudfunctions.net/updateSchedule', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        frequency: frequency,
                        dayOfWeek: dayOfWeek
                    })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Success:', data);
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });
            } else {
                alert("Please select both frequency and day.");
            }
        }
    </script>
</head>
<body>
<h1>Set Bid Processing Schedule</h1>
<label for="frequency">Frequency:</label>
<select id="frequency">
    <option value="Weekly">Weekly</option>
    <option value="Bi-Weekly">Bi-Weekly</option>
    <option value="Monthly">Monthly</option>
</select>
<br>
<label for="dayOfWeek">Day of the Week:</label>
<select id="dayOfWeek">
    <option value="Monday">Monday</option>
    <option value="Tuesday">Tuesday</option>
    <option value="Wednesday">Wednesday</option>
    <option value="Thursday">Thursday</option>
    <option value="Friday">Friday</option>
    <option value="Saturday">Saturday</option>
    <option value="Sunday">Sunday</option>
</select>
<br>
<button onclick="scheduleBidProcessing()">Set Schedule</button>
</body>
</html>
